<!DOCTYPE html>
<html ng-app="ajaxPollingApp" lang="ja"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorator="layout">
  <head>
    <title>Ajax polling - get : showcase</title>
    <script src="/webjars/angularjs/1.3.0-rc.3/angular.min.js"></script>
    <script src="/js/ajaxPolling.js"></script>
  </head>
  <body ng-controller="AjaxPollingCtrl">
    <section layout:fragment="content">
      <h2>Ajax polling - get(AngularJS)</h2>
      <nav class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
          <div class="navbar-header">
            <a class="navbar-brand" href="#">Brand</a>
          </div>
          <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
              <li><a href="#" ng-click="disp()"><span class="glyphicon glyphicon-bell"><span class="badge alert-danger">{{requestCount}}</span></span></a></li>
            </ul>
          </div>
        </div>
      </nav>
      <table class="table table-hover" ng-show="tableFlag">
        <tr><th>ID</th><th>Request Time</th><th>Arg1</th><th>Arg1</th><th></th></tr>
        <tr ng-repeat="r in records">
          <td>{{r.id}}</td><td>{{r.requestTime}}</td><td>{{r.arg1}}</td><td>{{r.arg2}}</td><td><a class="btn btn-default" ng-click="dispDetail(r)">Detail</a></td>
        </tr>
      </table>
      <div ng-show="detailFlag">
        <table class="table">
          <tr><th>ID</th><td>{{detail.id}}</td></tr>
          <tr><th>Request Time</th><td>{{detail.requestTime}}</td></tr>
          <tr><th>Arg1</th><td>{{detail.arg1}}</td></tr>
          <tr><th>Arg2</th><td>{{detail.arg1}}</td></tr>
        </table>
        <a class="btn btn-default" ng-click="startProgress(detail.id)">Start Progress</a>
      </div>
    </section>
  </body>
</html>